# Generated by Django 4.2.15 on 2025-05-20 17:10
from django.conf import settings
from django.db import migrations


def ensure_extra_details_on_anonymous_user(apps, schema_editor):
    User = apps.get_model('kobo_auth', 'User')
    ExtraUserDetail = apps.get_model('hub', 'ExtraUserDetail')
    anonymous_user = User.objects.get(pk=settings.ANONYMOUS_USER_ID)
    ExtraUserDetail.objects.get_or_create(
        user_id=anonymous_user.id,
        data={'name': '', 'organization': ''},
    )


class Migration(migrations.Migration):

    dependencies = [
        ('accounts', '0008_socialappcustomdata_is_public'),
    ]

    operations = [
        migrations.RunPython(
            ensure_extra_details_on_anonymous_user, migrations.RunPython.noop
        ),
    ]
